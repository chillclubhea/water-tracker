<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦¬æ‹‰æ¾é«”é‡ç®¡ç†ç³»çµ± (Supabase)</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        /* (CSS æ¨£å¼èˆ‡å‰ä¸€ç‰ˆç›¸åŒï¼Œç‚ºç¯€çœç¯‡å¹…åœ¨æ­¤çœç•¥ï¼Œä½†å·²åŒ…å«åœ¨æœ€çµ‚ç¨‹å¼ç¢¼ä¸­) */
        /* åŸºæœ¬èˆ‡éŸ¿æ‡‰å¼æ¨£å¼ */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            padding: 0;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #007bff;
            text-align: center;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 25px;
        }
        
        /* è¨»å†Š/è¼¸å…¥å€åŸŸæ¨£å¼ */
        .input-section {
            background-color: #e6f7ff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .input-section h2 {
            color: #0056b3;
            margin-top: 0;
            margin-bottom: 15px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .form-group input[type="text"],
        .form-group input[type="number"],
        .form-group input[type="date"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px; /* é˜²æ­¢ç§»å‹•ç«¯ç¸®æ”¾ */
        }
        .btn-primary {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #1e7e34;
        }

        /* å­¸å“¡åˆ—è¡¨æ¨£å¼ */
        #studentList {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .student-card {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: box-shadow 0.3s, transform 0.3s;
        }
        .student-card:hover {
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }
        .avatar-placeholder {
            width: 60px;
            height: 60px;
            background-color: #007bff;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 30px;
            margin-right: 15px;
            overflow: hidden;
            flex-shrink: 0;
        }
        .avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .student-info {
            flex-grow: 1;
            text-align: left;
        }
        .student-info strong {
            display: block;
            font-size: 18px;
            margin-bottom: 4px;
            color: #333;
        }
        .student-info span {
            font-size: 14px;
            color: #6c757d;
        }
        .latest-weight {
            font-size: 20px;
            font-weight: bold;
            color: #dc3545;
            margin-left: 15px;
            flex-shrink: 0;
        }

        /* è©³æƒ…èˆ‡è¨˜éŒ„å€åŸŸæ¨£å¼ (Modal-like) */
        .detail-section {
            background-color: #fff;
            padding: 20px;
            border: 2px solid #007bff;
            border-radius: 8px;
            display: none; /* é è¨­éš±è— */
            margin-top: 20px;
        }
        .detail-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 10px;
        }
        .detail-header h3 {
            margin: 0;
            font-size: 24px;
            color: #007bff;
        }
        .weight-summary {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f4f7f6;
            border-radius: 5px;
        }
        .weight-summary div {
            flex: 1;
        }
        .weight-value {
            font-size: 22px;
            font-weight: bold;
            color: #dc3545;
        }
        .weight-history-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #eee;
            padding: 10px;
            border-radius: 5px;
        }
        .weight-history-list li {
            list-style: none;
            padding: 8px 0;
            border-bottom: 1px dotted #ddd;
            display: flex;
            justify-content: space-between;
        }
        .weight-history-list li:last-child {
            border-bottom: none;
        }
        .record-form-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            align-items: flex-end;
        }
        .record-form-group > div {
            flex: 1;
        }
        .record-form-group button {
            flex-shrink: 0;
        }
        
        /* éŸ¿æ‡‰å¼å„ªåŒ– (å°è¢å¹•) */
        @media screen and (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            #studentList {
                grid-template-columns: 1fr; /* å–®åˆ—é¡¯ç¤º */
            }
            .student-card {
                padding: 10px;
            }
            .weight-summary {
                flex-direction: column;
            }
            .weight-summary div {
                margin: 5px 0;
            }
            .record-form-group {
                flex-direction: column;
                gap: 5px;
            }
            .record-form-group button {
                width: 100%;
            }
        }
        /* æç¤ºå€å¡Š */
        .alert-info {
            background-color: #ffeccf;
            border: 1px solid #ffbb58;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            color: #a0522d;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸƒ é¦¬æ‹‰æ¾é«”é‡ç®¡ç†ç³»çµ± (Supabase)</h1>
        
        <div class="alert-info">
            âš ï¸ **é‡è¦æç¤º**: è«‹åœ¨ &lt;script&gt; å€å¡Šä¸­ï¼Œå°‡ `YOUR_SUPABASE_URL` å’Œ `YOUR_SUPABASE_ANON_KEY` æ›¿æ›ç‚ºæ‚¨çš„å¯¦éš› Supabase å°ˆæ¡ˆæ†‘è­‰ï¼
        </div>

        <div class="input-section">
            <h2>ğŸ“ æ–°å¢å­¸å“¡ç™»è¨˜</h2>
            <div class="form-group">
                <label for="newStudentName">å­¸å“¡å§“å:</label>
                <input type="text" id="newStudentName" placeholder="è«‹è¼¸å…¥å­¸å“¡å…¨å" required>
            </div>
            <div class="form-group">
                <label for="newStudentAvatar">é ­åƒ (å¯é¸):</label>
                <input type="file" id="newStudentAvatar" accept="image/*" onchange="previewAvatar(event)">
                <div id="avatarPreview" class="avatar-placeholder" style="margin-top: 10px; font-size: 14px;">é è¦½åœ–</div>
            </div>
            <div class="form-group">
                <label for="initialWeight">åˆå§‹é«”é‡ (å…¬æ–¤):</label>
                <input type="number" id="initialWeight" min="1" step="0.1" placeholder="ä¾‹å¦‚: 75.5" required>
            </div>
            <button class="btn-primary" onclick="addStudent()">æ–°å¢å­¸å“¡ä¸¦è¨˜éŒ„åˆå§‹é«”é‡</button>
        </div>

        <h2>ğŸ“Š å­¸å“¡æ¸…å–® (é»æ“Šå¡ç‰‡è¨˜éŒ„/æŸ¥çœ‹è©³æƒ…)</h2>
        <div id="studentList">
            <p style="text-align: center; color: #007bff;">è¼‰å…¥ä¸­... è«‹æª¢æŸ¥ Supabase é€£ç·šã€‚</p>
        </div>

        <div id="studentDetail" class="detail-section">
            <div class="detail-header">
                <div id="detail-avatar" class="avatar-placeholder" style="width: 80px; height: 80px; font-size: 40px; margin-right: 20px;"></div>
                <div>
                    <h3 id="detail-name"></h3>
                    <p id="detail-initial-weight" style="margin: 0; color: #6c757d;"></p>
                </div>
            </div>
            
            <div class="weight-summary">
                <div>ç¸½é«”é‡è®ŠåŒ– (å…¬æ–¤) <div id="summary-delta" class="weight-value">0.0 kg</div></div>
                <div>ç›®å‰é«”é‡ (å…¬æ–¤) <div id="summary-current" class="weight-value">0.0 kg</div></div>
            </div>

            <h4 style="border-left: 5px solid #007bff; padding-left: 10px;">ğŸ“‰ é«”é‡æ­·å²è¨˜éŒ„</h4>
            <ul id="weightHistory" class="weight-history-list">
                </ul>

            <h4 style="border-left: 5px solid #28a745; padding-left: 10px; margin-top: 25px;">â• æ–°å¢é«”é‡è¨˜éŒ„</h4>
            <div class="record-form-group">
                <div>
                    <label for="recordDate">æ—¥æœŸ:</label>
                    <input type="date" id="recordDate" required>
                </div>
                <div>
                    <label for="recordWeight">é«”é‡ (å…¬æ–¤):</label>
                    <input type="number" id="recordWeight" min="1" step="0.1" placeholder="è«‹è¼¸å…¥é«”é‡" required>
                </div>
                <button class="btn-primary" onclick="recordWeight()">è¨˜éŒ„</button>
            </div>
            <button class="btn-primary" style="background-color: #dc3545; margin-top: 15px;" onclick="document.getElementById('studentDetail').style.display='none'">é—œé–‰è©³æƒ…</button>
        </div>
    </div>

    <script>
        // ==========================================================
        // ğŸš¨ æ­¥é©Ÿ 1: SUPABASE æ†‘è­‰è¨­å®š
        // è«‹æ›¿æ›ç‚ºæ‚¨çš„å¯¦éš› URL å’Œ Anon Key
        const SUPABASE_URL = 'https://rnghrlmernrtuqntvjkt.supabase.co'; 
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJuZ2hybG1lcm5ydHVxbnR2amt0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4MTY0ODAsImV4cCI6MjA4MTM5MjQ4MH0.VuHiyBoc8zCT4YLlVAtQeDHyFziimZWtZfvRYI23DSk';
        
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        // ==========================================================

        let currentStudents = [];
        let currentViewingStudentId = null;

        document.addEventListener('DOMContentLoaded', () => {
            if (SUPABASE_URL === 'https://rnghrlmernrtuqntvjkt.supabase.co') {
                 document.getElementById('studentList').innerHTML = '<p style="color: red; text-align: center;">é€£ç·šéŒ¯èª¤ï¼šè«‹å…ˆåœ¨ç¨‹å¼ç¢¼ä¸­å¡«å…¥æ‚¨çš„ Supabase æ†‘è­‰ï¼</p>';
                 return;
            }
            loadStudents();
            document.getElementById('recordDate').valueAsDate = new Date(); // é è¨­æ—¥æœŸç‚ºä»Šå¤©
        });

        // --- æ ¸å¿ƒè³‡æ–™ç²å–èˆ‡è¨ˆç®— ---

        /**
         * ç²å–æ‰€æœ‰å­¸å“¡è³‡æ–™åŠå…¶æœ€æ–°çš„é«”é‡è¨˜éŒ„
         */
        async function loadStudents() {
            document.getElementById('studentList').innerHTML = '<p style="text-align: center; color: #007bff;">è¼‰å…¥å­¸å“¡è³‡æ–™ä¸­...</p>';
            
            // ç”±æ–¼ Supabase RLS ç­–ç•¥å¯èƒ½é™åˆ¶ JOINï¼Œæˆ‘å€‘åˆ†æ­¥ç²å–ä¸¦åœ¨å®¢æˆ¶ç«¯åˆä½µ
            const { data: studentsData, error: studentError } = await supabase
                .from('students')
                .select('*')
                .order('name', { ascending: true });

            if (studentError) {
                console.error('Error fetching students:', studentError);
                document.getElementById('studentList').innerHTML = `<p style="color: red; text-align: center;">è¼‰å…¥å­¸å“¡å¤±æ•—: ${studentError.message}</p>`;
                return;
            }

            // ç²å–æ‰€æœ‰å­¸å“¡çš„æœ€æ–°é«”é‡ (å¯ä»¥é€šé PostgREST RPC æœ€ä½³åŒ–ï¼Œé€™è£¡æ¡ç”¨ç°¡å–®çš„ç²å–æ‰€æœ‰è¨˜éŒ„æ–¹å¼)
            const { data: recordsData, error: recordError } = await supabase
                .from('weight_records')
                .select('student_id, date, weight');

            if (recordError) {
                 console.warn('Error fetching weight records:', recordError);
                 // å³ä½¿è¨˜éŒ„å¤±æ•—ï¼Œæˆ‘å€‘ä»ç„¶é¡¯ç¤ºå­¸å“¡æ¸…å–®
            }

            const latestWeightsMap = {};
            if (recordsData) {
                // æ‰¾å‡ºæ¯å€‹å­¸å“¡çš„æœ€æ–°è¨˜éŒ„
                recordsData.forEach(record => {
                    const id = record.student_id;
                    if (!latestWeightsMap[id] || new Date(record.date) > new Date(latestWeightsMap[id].date)) {
                        latestWeightsMap[id] = record;
                    }
                });
            }

            currentStudents = studentsData.map(student => ({
                ...student,
                // ç‚ºæ¸²æŸ“åˆ—è¡¨æä¾›æœ€æ–°çš„é«”é‡è³‡è¨Š
                latestWeight: latestWeightsMap[student.id] ? latestWeightsMap[student.id].weight : student.initial_weight,
            }));

            renderStudentList();
        }

        /**
         * ç²å–å–®å€‹å­¸å“¡çš„æ‰€æœ‰é«”é‡æ­·å²
         */
        async function getWeightHistory(studentId) {
            const { data, error } = await supabase
                .from('weight_records')
                .select('*')
                .eq('student_id', studentId)
                .order('date', { ascending: false }); // æœ€æ–°è¨˜éŒ„åœ¨å‰

            if (error) {
                console.error('Error fetching weight history:', error);
                return [];
            }
            return data;
        }


        // --- UI æ¸²æŸ“åŠŸèƒ½ ---

        let base64Avatar = '';
        
        function previewAvatar(event) {
            const file = event.target.files[0];
            const reader = new FileReader();
            const previewElement = document.getElementById('avatarPreview');

            if (file) {
                reader.onload = (e) => {
                    base64Avatar = e.target.result;
                    previewElement.innerHTML = `<img src="${base64Avatar}" alt="Avatar Preview" class="avatar-img">`;
                };
                reader.readAsDataURL(file);
            } else {
                 base64Avatar = '';
                 previewElement.innerHTML = 'é è¦½åœ–';
            }
        }

        function renderStudentList() {
            const listContainer = document.getElementById('studentList');
            listContainer.innerHTML = '';

            if (currentStudents.length === 0) {
                listContainer.innerHTML = '<p style="text-align: center; color: #6c757d;">å°šæœªæœ‰å­¸å“¡ç™»è¨˜ã€‚</p>';
                return;
            }

            currentStudents.forEach(student => {
                const latestWeight = student.latestWeight;
                const card = document.createElement('div');
                card.className = 'student-card';
                card.setAttribute('onclick', `viewStudent('${student.id}')`);

                const avatarContent = student.avatar 
                    ? `<img src="${student.avatar}" alt="Avatar" class="avatar-img">` 
                    : student.name.charAt(0);

                card.innerHTML = `
                    <div class="avatar-placeholder">${avatarContent}</div>
                    <div class="student-info">
                        <strong>${student.name}</strong>
                        <span>åˆå§‹: ${student.initial_weight.toFixed(1)} kg</span>
                    </div>
                    <div class="latest-weight">${latestWeight.toFixed(1)} kg</div>
                `;
                listContainer.appendChild(card);
            });
        }

        async function renderWeightHistory(student, history) {
            const historyList = document.getElementById('weightHistory');
            historyList.innerHTML = '';
            
            const initialWeight = parseFloat(student.initial_weight);
            const latestRecord = history[0] || { weight: initialWeight }; // æœ€æ–°è¨˜éŒ„

            // ç¢ºä¿æ­·å²è¨˜éŒ„æŒ‰æ—¥æœŸé™åºæ’åˆ— (å·²åœ¨ getWeightHistory ä¸­å®Œæˆ)
            
            history.forEach((record, index) => {
                const weight = parseFloat(record.weight);
                const delta = weight - initialWeight;
                let deltaText = delta === 0 
                    ? '---' 
                    : delta > 0 
                        ? `<span style="color: red;">+${delta.toFixed(1)} kg ğŸ“ˆ</span>` 
                        : `<span style="color: green;">${delta.toFixed(1)} kg ğŸ“‰</span>`;
                
                // è¨ˆç®—èˆ‡å‰ä¸€æ¬¡è¨˜éŒ„çš„å·®å€¼
                let previousWeight = index < history.length - 1 
                    ? parseFloat(history[index + 1].weight) 
                    : initialWeight; 
                
                let sessionDelta = weight - previousWeight;
                let sessionDeltaText = sessionDelta === 0 
                    ? '' 
                    : sessionDelta > 0 
                        ? ` (â†‘${sessionDelta.toFixed(1)})` 
                        : ` (â†“${Math.abs(sessionDelta).toFixed(1)})`;

                historyList.innerHTML += `
                    <li>
                        <span>ğŸ“… ${record.date}</span>
                        <span style="font-weight: bold;">${weight.toFixed(1)} kg ${sessionDeltaText}</span>
                        <span>ç¸½è®Šå‹•: ${deltaText}</span>
                    </li>
                `;
            });
            
            // 4. æ›´æ–°ç¸½çµå€
            const latestWeightValue = parseFloat(latestRecord.weight);
            const totalDelta = latestWeightValue - initialWeight;
            const totalDeltaText = totalDelta === 0 
                ? '0.0 kg'
                : totalDelta > 0 
                    ? `+${totalDelta.toFixed(1)} kg` 
                    : `${totalDelta.toFixed(1)} kg`;

            document.getElementById('summary-delta').textContent = totalDeltaText;
            document.getElementById('summary-delta').style.color = totalDelta === 0 ? '#6c757d' : totalDelta > 0 ? '#dc3545' : '#28a745';
            document.getElementById('summary-current').textContent = `${latestWeightValue.toFixed(1)} kg`;
        }


        // --- Supabase CRUD æ“ä½œ ---

        /**
         * æ–°å¢å­¸å“¡ (Supabase INSERT)
         */
        async function addStudent() {
            const name = document.getElementById('newStudentName').value.trim();
            const initialWeight = parseFloat(document.getElementById('initialWeight').value);
            
            if (!name || isNaN(initialWeight) || initialWeight <= 0) {
                alert('è«‹å¡«å¯«æœ‰æ•ˆçš„å§“åå’Œåˆå§‹é«”é‡ï¼');
                return;
            }

            // 1. æ’å…¥å­¸å“¡è³‡æ–™
            const { data: studentData, error: studentError } = await supabase
                .from('students')
                .insert([{ 
                    name: name, 
                    avatar: base64Avatar, 
                    initial_weight: initialWeight 
                }])
                .select(); // ç¢ºä¿è¿”å›æ–°å‰µå»ºçš„ ID

            if (studentError) {
                alert(`æ–°å¢å­¸å“¡å¤±æ•—: ${studentError.message}`);
                console.error(studentError);
                return;
            }

            const newStudentId = studentData[0].id;
            const today = new Date().toISOString().split('T')[0];

            // 2. æ’å…¥åˆå§‹é«”é‡è¨˜éŒ„
            const { error: recordError } = await supabase
                .from('weight_records')
                .insert([{
                    student_id: newStudentId,
                    date: today,
                    weight: initialWeight
                }]);

            if (recordError) {
                alert(`è­¦å‘Š: åˆå§‹é«”é‡è¨˜éŒ„å¤±æ•—: ${recordError.message}`);
                console.error(recordError);
            }

            alert(`å­¸å“¡ ${name} ç™»è¨˜æˆåŠŸï¼`);
            
            // æ¸…ç©ºè¡¨å–®ä¸¦é‡æ–°è¼‰å…¥åˆ—è¡¨
            document.getElementById('newStudentName').value = '';
            document.getElementById('initialWeight').value = '';
            document.getElementById('newStudentAvatar').value = '';
            document.getElementById('avatarPreview').innerHTML = 'é è¦½åœ–';
            base64Avatar = '';
            loadStudents();
        }

        /**
         * æŸ¥çœ‹å­¸å“¡è©³æƒ… (Supabase SELECT)
         */
        async function viewStudent(studentId) {
            const student = currentStudents.find(s => s.id === studentId);
            if (!student) return;

            currentViewingStudentId = studentId;
            const detailSection = document.getElementById('studentDetail');
            
            // è¼‰å…¥é«”é‡æ­·å²
            const weightHistory = await getWeightHistory(studentId);

            // 1. æ¸²æŸ“æ¨™é ­å’Œé ­åƒ
            document.getElementById('detail-name').textContent = student.name;
            document.getElementById('detail-initial-weight').textContent = `åˆå§‹é«”é‡: ${parseFloat(student.initial_weight).toFixed(1)} kg`;
            
            const detailAvatar = document.getElementById('detail-avatar');
            detailAvatar.innerHTML = student.avatar 
                ? `<img src="${student.avatar}" alt="Avatar" class="avatar-img">` 
                : student.name.charAt(0);

            // 2. æ¸²æŸ“é«”é‡æ­·å²
            renderWeightHistory(student, weightHistory);
            
            // 3. é¡¯ç¤ºè©³æƒ…å€
            detailSection.style.display = 'block';
        }

        /**
         * æ–°å¢/æ›´æ–°é«”é‡è¨˜éŒ„ (Supabase UPSERT)
         */
        async function recordWeight() {
            const date = document.getElementById('recordDate').value;
            const weight = parseFloat(document.getElementById('recordWeight').value);
            const studentId = currentViewingStudentId;

            if (!date || isNaN(weight) || weight <= 0 || !studentId) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„æ—¥æœŸå’Œé«”é‡ï¼');
                return;
            }
            
            // ä½¿ç”¨ UPSERT ç¢ºä¿å¦‚æœåŒä¸€å¤©æœ‰è¨˜éŒ„å‰‡æ›´æ–°ï¼Œæ²’æœ‰å‰‡æ–°å¢
            // ç¢ºä¿æ‚¨çš„ weight_records è¡¨è¨­å®šäº† (student_id, date) ä¸Šçš„å”¯ä¸€ç´¢å¼• (Unique Constraint)ï¼ŒSupabase æ‰èƒ½æ­£ç¢ºåŸ·è¡Œ UPSERT
            const { error } = await supabase
                .from('weight_records')
                .upsert(
                    { 
                        student_id: studentId, 
                        date: date, 
                        weight: weight 
                    },
                    { onConflict: 'student_id, date' } 
                );

            if (error) {
                alert(`è¨˜éŒ„é«”é‡å¤±æ•—: ${error.message}`);
                console.error(error);
                return;
            }

            alert('é«”é‡è¨˜éŒ„æˆåŠŸï¼');
            
            // é‡æ–°è¼‰å…¥è©³æƒ…å’Œåˆ—è¡¨
            const student = currentStudents.find(s => s.id === studentId);
            if (student) {
                viewStudent(studentId); // é‡æ–°è¼‰å…¥è©³æƒ…
                loadStudents(); // é‡æ–°è¼‰å…¥åˆ—è¡¨ä»¥æ›´æ–°æœ€æ–°é«”é‡
            }
            
            // æ¸…ç©ºé«”é‡è¼¸å…¥
            document.getElementById('recordWeight').value = '';
            document.getElementById('recordDate').valueAsDate = new Date(); 
        }
    </script>

</body>
</html>
